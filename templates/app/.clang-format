# Style file for clang-format ( http://clang.llvm.org/docs/ClangFormatStyleOptions.html )

# Style is based on google's c++ coding style.
# see http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml
BasedOnStyle: Google
#Language: Cpp
Standard: Latest


# columns guideline
ColumnLimit: 150
PenaltyExcessCharacter: 1
PenaltyBreakString: 50


# Indentation and Braces
IndentWidth: 4
AllowShortIfStatementsOnASingleLine: false
AllowShortLoopsOnASingleLine: false
AllowShortFunctionsOnASingleLine: All
AllowShortCaseLabelsOnASingleLine: true
AlwaysBreakBeforeMultilineStrings: false
BreakTemplateDeclarations: true
BreakBeforeBinaryOperators: true
BreakBeforeTernaryOperators: true
BreakBeforeConceptDeclarations: true
BreakConstructorInitializersBeforeComma: false
BreakBeforeBraces: Allman
BinPackParameters: false
PackConstructorInitializers: NextLine
Cpp11BracedListStyle: true
IndentCaseLabels: false
RequiresClausePosition: OwnLine


# Spaces
DerivePointerAlignment: false
PointerAlignment: Left
MaxEmptyLinesToKeep: 2
SpaceAfterControlStatementKeyword: true
SpaceBeforeAssignmentOperators: true
SpaceInEmptyParentheses: false
SpacesBeforeTrailingComments: 1
SpacesInAngles: false
SpacesInCStyleCastParentheses: false
SpacesInParentheses: false
SpacesInSquareBrackets: false
UseTab: Never
ConstructorInitializerIndentWidth: 2
AccessModifierOffset: -4


# Comments
FixNamespaceComments: true
AlignTrailingComments: true


# Includes are grouped by "distance": local file, project headers,
# external library headers, then the standard library. This ordering
# improves include hygiene: headers pulled in close to the current file
# are least likely to hide missing dependencies in other headers, while
# project-wide and external includes follow in widening rings. When a
# header forgets to include something it depends on, this grouping makes
# the failure appear earlier and prevents accidental masking.
SortIncludes: true
IncludeBlocks: Regroup
IncludeCategories:
  - Regex:  '^"'
    Priority: 1
  - Regex:  '^<@PROJECT_SLUG@/'
    Priority: 2
  - Regex: '^<.*\.(h|hh|hpp|hxx)>'  # <foo/bar/file.h>, <x.hh>, ...
    Priority: 3
  - Regex: '^<'                     # stdlib
    Priority: 4


# We use east const (`T const`) via `QualifierAlignment: Right`.
# In modern C++, any name used as a type must behave like a real type alias.
# The only known semantic changes triggered by this option arise from
# macro-typedefs such as `#define P int*`, where `const P a` and `P const a`
# do not denote the same type. This discrepancy does not exist with `using P = int*`
# and is therefore treated as a bug in the original code, not in the formatter.
# If a rewrite changes meaning, it reveals a preprocessor-based type that should
# be replaced with a proper alias or renamed to make its intent explicit.
QualifierAlignment: Right
